;
; Timer0_Interrupt.asm
;
; Created: 8/15/2023 8:27:56 PM
; Author : Options
;


; Replace with your application code

.INCLUDE "M32DEF.INC"

.ORG 0x00
JMP MAIN

.ORG 0x16
JMP T0_ISR

.ORG 0x100

MAIN:
LDI R16,HIGH(RAMEND)
OUT SPH,R16
LDI R16,LOW(RAMEND)
OUT SPL,R16

LDI R16,0x00
OUT DDRC,R16
LDI R16,0xFF
OUT PORTC,R16
OUT DDRD,R16
SBI DDRB,5

LDI R16,0x00
OUT TCNT0,R16
LDI R16,0x01
OUT TIMSK,R16
OUT TCCR0,R16

SEI

LOOP:
IN R16,PINC
OUT PORTD,R16
RJMP LOOP



.ORG 0x200
T0_ISR:
LDI R20,1<<5
IN R21,PORTB
EOR R21,R20
OUT PORTB,R21
LDI R20,0x00
OUT TCNT0,R20
RETI
